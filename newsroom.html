---
layout: default
title: Newsroom
pagination: 
  enabled: true 
  per_page: 6 
  items: all_items
---

{% assign all_items = site.press | concat: site.media %}
{% assign sorted = all_items | sort: "date" | reverse %}

{% assign page_size = 10 %}
{% assign total_items = sorted.size %}
{% assign total_pages = total_items | divided_by: page_size | ceil %}

{% assign current_page = page.page | default: 1 %}
{% assign offset = page_size | times: current_page | minus: page_size %}
{% assign paginated_items = sorted | slice: offset, page_size %}

{% assign featured_items = all_items | where: "featured", true | sort: "date" | reverse %}

<div class="link-container">
  <h1>Newsroom</h1>
  <p>Your hub for press releases, media coverage, and company updates.</p>
  <p class="rss-subscribe">
    <a href="/newsroom.xml" class="link-button">Subscribe to Newsroom RSS</a>
  </p>
</div>

{% if featured_items.size > 0 %}
<div class="featured-section">
  <h2>Featured</h2>

  <div class="featured-grid">
    {% for item in featured_items %}
      {% assign link = item.external_url | default: item.url %}

      <div class="featured-card">
        <h3>{{ item.title }}</h3>
        <p>{{ item.summary }}</p>

        {% if item.type == "press" %}
          <a class="featured-link" href="{{ link }}">Read press release</a>
        {% else %}
          <a class="featured-link" href="{{ link }}" target="_blank">Read article</a>
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>
{% endif %}

<div class="newsroom-controls">
  <div class="filters">
    <button onclick="filterItems('all')" class="active">All</button>
    <button onclick="filterItems('press')">Press Releases</button>
    <button onclick="filterItems('media')">Media Coverage</button>
  </div>

  <input type="text" id="search" placeholder="Search…" onkeyup="searchItems()">
  <div class="tag-filter">
      <select id="tagSelect" onchange="filterByTag()">
        <option value="">Filter by tag</option>
        {% assign all_items = site.press | concat: site.media %}
        {% assign all_tags = "" | split: "" %}

        {% for item in all_items %}
          {% for tag in item.tags %}
            {% unless all_tags contains tag %}
              {% assign all_tags = all_tags | push: tag %}
            {% endunless %}
          {% endfor %}
        {% endfor %}

        {% for tag in all_tags %}
          <option value="{{ tag }}">{{ tag }}</option>
        {% endfor %}
      </select>
    </div>
</div>

<div class="pagination">
  {% if current_page > 1 %}
    <a href="/newsroom/page{{ current_page | minus: 1 }}">← Previous</a>
  {% endif %}

  {% for i in (1..total_pages) %}
    <a href="/newsroom/page{{ i }}" class="{% if i == current_page %}active{% endif %}">
      {{ i }}
    </a>
  {% endfor %}

  {% if current_page < total_pages %}
    <a href="/newsroom/page{{ current_page | plus: 1 }}">Next →</a>
  {% endif %}
</div>

<ul id="news-list" class="news-grid">

  {% for item in paginated_items  %}
    {% assign link = item.external_url | default: item.url %}

    <li class="news-card" data-type="{{ item.type }}">
      <div class="tags">
        {% for tag in item.tags %}
          <span class="tag">{{ tag }}</span>
        {% endfor %}
      </div>

      <div class="news-card-content">
        <h2>{{ item.title | truncate: 70 }}</h2>

        <p class="summary-short">
          {{ item.summary | truncate: 160 }}
          <button class="read-more" onclick="toggleSummary(this)">Read more</button>
        </p>

        <p class="summary-full" style="display:none;">
          {{ item.summary }}
          <button class="read-more" onclick="toggleSummary(this)">Hide</button>
        </p>

        <span class="date">{{ item.date | date: "%B %-d, %Y" }}</span>

        {% if item.type == "press" %}
          <a class="news-link" href="{{ link }}">View press release</a>
        {% else %}
          <a class="news-link" href="{{ link }}" target="_blank">Read article</a>
        {% endif %}
      </div>
    </li>
  {% endfor %}
</ul>

<div class="pagination">
  {% if current_page > 1 %}
    <a href="/newsroom/page{{ current_page | minus: 1 }}">← Previous</a>
  {% endif %}

  {% for i in (1..total_pages) %}
    <a href="/newsroom/page{{ i }}" class="{% if i == current_page %}active{% endif %}">
      {{ i }}
    </a>
  {% endfor %}

  {% if current_page < total_pages %}
    <a href="/newsroom/page{{ current_page | plus: 1 }}">Next →</a>
  {% endif %}
</div>

<script>
function toggleSummary(btn) {
  const short = btn.parentElement.previousElementSibling
  const full = btn.parentElement
  const isOpen = full.style.display === "block"
  full.style.display = isOpen ? "none" : "block"
  short.style.display = isOpen ? "block" : "none"
}

function filterItems(type) {
  document.querySelectorAll('.news-card').forEach(item => {
    item.style.display = (type === 'all' || item.dataset.type === type) ? 'block' : 'none'
  })
  document.querySelectorAll('.filters button').forEach(btn => btn.classList.remove('active'))
  event.target.classList.add('active')
}

function searchItems() {
  const q = document.getElementById('search').value.toLowerCase()
  document.querySelectorAll('.news-card').forEach(item => {
    const text = item.innerText.toLowerCase()
    item.style.display = text.includes(q) ? 'block' : 'none'
  })
}

function filterByTag() {
  const selected = document.getElementById('tagSelect').value.toLowerCase()
  document.querySelectorAll('.news-card').forEach(card => {
    const tags = card.innerText.toLowerCase()
    card.style.display = selected === "" || tags.includes(selected) ? "block" : "none"
  })
}

</script>
